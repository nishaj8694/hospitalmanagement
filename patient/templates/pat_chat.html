
{% extends "user-admin.html" %}
{% load static%}
{% block 'content' %}
<style>

  
  .chat1{
    flex: 25;

  }
  .chat2{
    flex: 75;
  
  }
  #backbutton{
    display: none;

  }
  
  .act{
    background-color: rgb(255, 255, 255,0.5);
  }

  @media (max-width:578px) {
    .chat1{
       flex: 1;
    } 
    .chat2{
       flex: 1;
       display: 'd-none';
    }
    #backbutton{
       display:inline;
    }
 
  }
</style>
  <div class="d-flex m-5  border rounded-3" style="height: 90%;">
   
    <div class="d-flex flex-column h-100 align-items-center 
                bg-transBody  p-0 m-0 border-end  chat1">
        <div class="border-bottom w-100 d-flex justify-content-center align-items-center " style="height:75px">
          <h4 class="text-uppercase" id="current-profile" >{{request.user}}</h4>
          <script id="userData" type="application/json">
            { "username": "{{ request.user.username }}"}
        </script>
        </div>
        <div class="overflow-y-auto w-100" style="height: 90%;">
          <ul class=" w-100 p-0 m-0 ">
            {% for i in pat%}
                <li class="border-bottom rounded-0" data-username="{{ i.patient.user}}" > 
                   
                   <a href="javascript:void(0)" 
                   value="{{i.docter_id}}" class="btn w-100  open-chat-btn" 
                   data-user-id="{{i.id}}">{{i.docter}}
                   <h6 class="d-inline  float-right {% if i.patient.user.online %} bg-success
                    {% else %} bg-danger {% endif %}" id="light{{i.docter_id}}"></h6> 
                  </a> 
                </li>       
              

            {% endfor %}
          </ul>
           
        </div>
        
    </div>
    <div class="position-relative d-flex flex-column h-100 p-0 m-0 bg-transBody  chat2">
      <div class="d-flex justify-content-center align-items-center h-100 chat2default">
       <p class="d-inline">select the docter to begine chat</p> <i class="bi bi-chat-dots " style="font-size: 2em; padding-bottom: 15px; margin-left:5px;"></i>
      </div>
      <div class="position-relative d-flex d-none flex-column h-100 p-0 m-0  chat2defaultnone">
          <div class="d-flex align-items-center border-bottom row" style="height:75px; margin-right:1px; margin-left: 1px;">
            <div class="col-lg-2 col-md-2 col-sm-4  col-4 d-flex h-100 align-items-center pr-0 pl-0 mr-0 ml-0">
                  <a href="javascript:void(0)" onclick="closeChat(event)" id="backbutton">
                      <i class="bi bi-arrow-left-short text-black" style="font-size: 2em;"></i>
                  </a>  
                  <div style="height:95%;width:60%; border-radius:50%; background-color: antiquewhite; overflow: hidden;">
                    <img src=""  alt="img" id="profileimage"  
                        style="width: 100%; height: 100%; object-fit: cover;" 
                        onerror="this.src='{% static 'chat/img/unknown.jpg' %}';">

                  </div>                  
                  <!-- <div style="height: 0; padding-bottom: 70%; border-radius: 50%; background-color: antiquewhite; position: relative; overflow: hidden;">
                    <img src="" alt="img" id="profileimage" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                </div> -->
            </div>
            <div class="col-lg-10 col-md-10 col-sm-8 col-8 d-flex justify-content-between">
              <div style="transform: translate(-9%, 0%);">
                <h3 class="p-0 m-0" id="profilename" style="transform: translate(-9%, 0%);"></h3>
                <h6 class="p-0 m-0" id="profileonline"style="transform: translate(-9%, 0%);" ></h6>
              </div>
              <div style="transform: translate(0%, 25%);">
                <i class="bi bi-camera-reels-fill" id="vedioButton"></i>
              </div>
            </div>
          </div>
          <div class="d-flex flex-column" style="height: 90%;">
            <div class="overflow-y-auto p-3"  id="chat-content" style="height:95% ; scrollbar-width: thin;
            scrollbar-color: transparent rgba(0, 0, 0, 0.3)">
            </div>
            <form class="position-relative"role="search">
              <input class="form-control" type="search" id="chat-input" placeholder="Search" aria-label="Search">
              <button class="btn btn-sm btn-success position-absolute w-15"
              type="submit" style="right:2px;top: 2px;" id="chat-submit">Search</button>
            </form>
            
          </div>
      </div>    
      <script  src="{%static 'Doc\js\vediochat.js' %}"></script>
    </div>
   
  </div>



{%endblock%}


























<!-- 



             
{% if messages%}                  
{% for message in messages %}
{% if message.tags == 'error'%}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        var m="{{message}}";
        console.log(m);
        Swal.fire({
                position: 'center',
                icon: 'error',
                title: m,
                showConfirmButton: false,
                timer: 4000
                })
       </script>
       {%endif%}
{% if message.tags == 'success'%}
       <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
       <script>
           var m="{{message}}";
           console.log(m);
           Swal.fire({
                   position: 'center',
                   icon: 'success',
                   title: m,
                   showConfirmButton: false,
                   timer: 4500
                   })
          </script>
          {%endif%}       
{% endfor %}
{%endif%} 
<style>
  
  .lc{
  padding: 0;
  }
  .slid {
    cursor: pointer;
    float:right;
    height: 20px;
    width: 20px;
    border-radius: 20px;
  }
  
</style> 
      <div class="row  no-gutters m-5 justify-content-center rounded-2  p-0">
        <div class="col-lg-4 col-md-4  col-sm-3 col-xs-2 bg-transBody  lc" style="height:505px">    
            <h5 class="px-1 text-uppercase ml-5 mt-3">{{request.user}}</h5>
            <ul id="user-list">
              {% for i in pat%}
                {% if i.patient.user.online%}
                  <li  data-username="{{ i.patient.user}}" style="list-style: none;"> 
                     <a href="{%url 'docter:msgg' i.id %}" id="{{i.patient.user.username}}_status" 
                     class="btn bg-transBody w-75 m-1 open-chat-btn" value="{{i.docter_id}}" >{{i.patient}}
                     <h6 class="d-inline slid float-right bg-success" id="light{{i.docter_id}}"></h6> 
                    </a>      
                 </li>
                {%else%}
                 <li  data-username="{{ i.patient.user}}" style="list-style: none;"> 
                    <a href="{%url 'docter:msgg' i.id %}" id="{{i.patient.user.username}}_status"
                     class="btn bg-transBody  w-75 m-1 open-chat-btn" value="{{i.docter_id}}" >{{i.patient}}
                     <h6 class="d-inline slid float-right bg-danger" ></h6> 
                    </a>         
                 </li>
                {%endif%}   
              {% endfor %}
            </ul>
        </div>
        <div class="col-lg-8 col-md-8 col-sm-5 col-xs-4 lc" >      
          {% block 'subject' %}


          {% endblock %}
        </div>
      </div>      
