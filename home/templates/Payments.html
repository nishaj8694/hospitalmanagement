{% extends "base.html" %}
{% block 'content' %}
    {% load static%}
    <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="{% static 'Prod/css/Pd_bootstrap.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'Prod/css/Pd_font-awesome.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'Prod/css/Pd_elegant-icons.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'Prod/css/Pd_jquery-ui.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'Prod/css/Pd_magnific-popup.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'Prod/css/Pd_owl.carousel.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'Prod/css/Pd_slicknav.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'Prod/css/Pd_style.css' %}" type="text/css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
      <div class="container">
            <div class="breadcrumb-option">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="breadcrumb__links">
                                <a href=""><i class="fa fa-home"></i>Home</a>
                                <a href="#">Product </a>
                                <span>Payment</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row w-100 h-100 d-flex justify-content-center align-items-center my-5">
                <div class="col-lg-4 col-sm-10  ">
                    <div class="card p-5  bg-light ">
                        <h3 class="text-center text-dark">Payment</h3>
                        <div class="my-3">
                            <div class="d-flex justify-content-between">
                                <h5>order ID</h5><h5>{{order.id}}</span></h5>
                            </div>
                            <div class="d-flex justify-content-between">
                                <h5>Payment ID</h5><h5>{{order.razor_orderid}}</span></h5>
                            </div>
                            <div class="d-flex justify-content-between">
                                <h5>Amount</h5><h5>{{order.Total_Price}}</h5></span></h5>
                            </div>
                        </div>
                        <button class="btn bg-body my-3" id="rzp-button1">Pay</button>
                        <a href="{% url 'home:payment_cancel' order.id %}" class="btn btn-danger">Cancel</a>
                    </div>
                </div>
            </div>    
            
      </div>
   <script src="https://checkout.razorpay.com/v1/checkout.js"></script> 
   <script>
                var options = {
                    "key": "rzp_test_zXedqyyI6ertFX", 
                    "amount": "{{payment.amount}}", 
                    "currency": "INR",
                    "name": "Test corp",
                    "description": "Test Transaction",
                    "image": "https://example.com/your_logo",
                    "order_id": "{{payment.id}}", 
                    "handler": function (response){
                        
                        window.location.href='http://127.0.0.1:8000/success/?razororder={{payment.id}}'
                    },
                    "prefill": {
                        "name": "{{request.user.name}}",
                        "email": "{{request.user.email}}",
                        "contact": "123456789"
                    },
                    "notes": {
                        "address": "Razorpay Corporate Office"
                    },
                    "theme": {
                        "color": "#3399cc"
                    }
                };
                var rzp1 = new Razorpay(options);
                rzp1.on('payment.failed', function (response){
                        alert(response.error.code);
                        alert(response.error.description);
                        alert(response.error.source);
                        alert(response.error.step);
                        alert(response.error.reason);
                        alert(response.error.metadata.order_id);
                        alert(response.error.metadata.payment_id);
                });
                document.getElementById('rzp-button1').onclick = function(e){
                    rzp1.open();
                    e.preventDefault();
                }
   </script>  
    <script src="{% static 'Prod/js/Pd_jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_bootstrap.min.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_jquery-ui.min.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_mixitup.min.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_jquery.countdown.min.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_jquery.slicknav.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_owl.carousel.min.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_jquery.nicescroll.min.js' %}"></script>
    <script src="{% static 'Prod/js/Pd_main.js' %}"></script>


{%endblock%}